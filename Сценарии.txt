1. Сценарий: Подать заявку (SubmitApplication)

Актор: Соискатель (Applicant)
Цель: Создать новую заявку на экспертизу проекта.
Предусловия: Соискатель авторизован в системе.

Основной поток:

Соискатель выбирает Use Case Подать заявку (SubmitApplication) в интерфейсе системы.

Система запрашивает у соискателя данные заявки: title и description.

Соискатель вводит необходимые данные и отправляет форму.

SystemFacade делегирует запрос в ApplicationService.

ApplicationService создает объект Application с начальным состоянием SubmittedState.

Метод Application.submit() выполняет валидацию данных.

При успешной валидации заявка сохраняется в БД со статусом SUBMITTED.

Система уведомляет соискателя о создании заявки и возвращает applicationId.

Исключения:

Данные некорректны - система отображает сообщение об ошибке и не создает заявку.

Пользователь не авторизован - переход к Use Case Авторизация.

2. Сценарий: Просмотреть статус заявки (ViewStatus)

Актор: Соискатель (Applicant)
Цель: Ознакомиться с текущим состоянием своих заявок.
Предусловия: Соискатель авторизован.

Основной поток:

Соискатель выбирает Use Case Просмотреть статус заявки (ViewStatus).

SystemFacade обращается к ApplicationService для получения списка заявок пользователя (getApplicationsByApplicant(applicantId)).

ApplicationService возвращает массив объектов Application с текущими состояниями (SubmittedState, UnderReviewState, EvaluatedState, WithdrawnState).

Система отображает список заявок и их состояния в интерфейсе пользователя.

Исключения:

Нет созданных заявок - система отображает сообщение “Заявки отсутствуют”.

Пользователь не авторизован - переход к Use Case Авторизация.

3. Сценарий: Оценить заявку (EvaluateApplication)

Актор: Эксперт (Expert)
Цель: Провести оценку назначенной заявки.
Предусловия: Заявка находится в состоянии UnderReviewState, эксперт авторизован и назначен на заявку.

Основной поток:

Эксперт выбирает Use Case Оценить заявку (EvaluateApplication).

SystemFacade проверяет текущее состояние заявки через Application.getState().

Если заявка в состоянии UNDER_REVIEW, система открывает форму для ввода оценки.

Эксперт вводит score и comments.

EvaluationService.saveEvaluation() сохраняет оценку в БД и связывает её с заявкой.

Application.transition_to(EVALUATED) - состояние заявки обновляется на EvaluatedState.

Система уведомляет эксперта о успешной оценке.

Исключения:

Заявка не находится в состоянии UNDER_REVIEW → система блокирует оценку и выводит сообщение.

Данные оценки некорректны - система отображает сообщение об ошибке.

4. Сценарий: Принять решение по заявке (MakeDecision)

(диаграмма с FundHolder и State)

Актор: Держатель фонда (FundHolder)
Цель: Принять окончательное решение по уже оценённой заявке.
Предусловия:

Пользователь авторизован как FundHolder.

Заявка находится в состоянии EvaluatedState.

Основной поток:

Держатель фонда выбирает Use Case MakeDecision в интерфейсе.

Пользователь указывает:
статус решения (APPROVED или REJECTED)
текстовое примечание (notes)

SystemFacade.makeDecision() принимает запрос и делегирует его в DecisionService.saveDecision().

DecisionService запрашивает текущее состояние заявки через Application.getState().

Если состояние — EvaluatedState, то сервис подтверждает возможность принятия решения.

DecisionService создаёт объект Decision и сохраняет его в БД (INSERT Decision).

После сохранения DecisionService вызывает переход состояния:

status = APPROVED - Application - ApprovedState

status = REJECTED - Application - RejectedState

SystemFacade отправляет пользователю уведомление об успешном принятии решения.

Исключения:

Заявка не находится в EvaluatedState - система выводит сообщение "Принятие решения недоступно".

Нет прав доступа - отклонение операции.

Неверный формат данных решения - сообщение об ошибке.

5. Сценарий: Управление профилем пользователя (ManageProfile)

(диаграмма User - Facade - UserService - DB)

Актор: Любой пользователь системы (User)
Цель: Изменить свои персональные данные в профиле.
Предусловия:

Пользователь авторизован.

Основной поток:

Пользователь выбирает Use Case Управление профилем (ManageProfile).

Пользователь вводит новый набор данных профиля (profileData).
Например: имя, email, контактная информация.

SystemFacade.manageProfile() принимает данные и перенаправляет запрос в UserService.updateProfile().

UserService формирует UPDATE-запрос и отправляет его в БД.

База данных возвращает подтверждение успешного обновления.

UserService передаёт результат обратно в SystemFacade.

SystemFacade отправляет пользователю уведомление:
"Профиль успешно обновлён".

Исключения:

Пользователь не авторизован - переход к Use Case Авторизация.

Некорректные данные профиля - система выводит ошибку и не обновляет данные.

Ошибка БД → система сообщает, что изменения не сохранены.