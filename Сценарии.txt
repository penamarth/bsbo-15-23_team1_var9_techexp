1. Сценарий: Подать заявку (SubmitApplication)

Актор: Соискатель (Applicant)
Цель: Создать новую заявку на экспертизу проекта.
Предусловия: Соискатель авторизован в системе.

Основной поток:

Соискатель выбирает Use Case Подать заявку (SubmitApplication) в интерфейсе системы.

Система запрашивает у соискателя данные заявки: title и description.

Соискатель вводит необходимые данные и отправляет форму.

SystemFacade делегирует запрос в ApplicationService.

ApplicationService создает объект Application с начальным состоянием SubmittedState.

Метод Application.submit() выполняет валидацию данных.

При успешной валидации заявка сохраняется в БД со статусом SUBMITTED.

Система уведомляет соискателя о создании заявки и возвращает applicationId.

Исключения:

Данные некорректны → система отображает сообщение об ошибке и не создает заявку.

Пользователь не авторизован → переход к Use Case Авторизация.

2. Сценарий: Просмотреть статус заявки (ViewStatus)

Актор: Соискатель (Applicant)
Цель: Ознакомиться с текущим состоянием своих заявок.
Предусловия: Соискатель авторизован.

Основной поток:

Соискатель выбирает Use Case Просмотреть статус заявки (ViewStatus).

SystemFacade обращается к ApplicationService для получения списка заявок пользователя (getApplicationsByApplicant(applicantId)).

ApplicationService возвращает массив объектов Application с текущими состояниями (SubmittedState, UnderReviewState, EvaluatedState, WithdrawnState).

Система отображает список заявок и их состояния в интерфейсе пользователя.

Исключения:

Нет созданных заявок → система отображает сообщение “Заявки отсутствуют”.

Пользователь не авторизован → переход к Use Case Авторизация.

3. Сценарий: Оценить заявку (EvaluateApplication)

Актор: Эксперт (Expert)
Цель: Провести оценку назначенной заявки.
Предусловия: Заявка находится в состоянии UnderReviewState, эксперт авторизован и назначен на заявку.

Основной поток:

Эксперт выбирает Use Case Оценить заявку (EvaluateApplication).

SystemFacade проверяет текущее состояние заявки через Application.getState().

Если заявка в состоянии UNDER_REVIEW, система открывает форму для ввода оценки.

Эксперт вводит score и comments.

EvaluationService.saveEvaluation() сохраняет оценку в БД и связывает её с заявкой.

Application.transition_to(EVALUATED) — состояние заявки обновляется на EvaluatedState.

Система уведомляет эксперта о успешной оценке.

Исключения:

Заявка не находится в состоянии UNDER_REVIEW → система блокирует оценку и выводит сообщение.

Данные оценки некорректны → система отображает сообщение об ошибке.